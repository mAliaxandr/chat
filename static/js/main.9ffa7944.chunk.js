(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(7),l=a.n(o),c=(a(15),a(1)),i=a(2),r=a(4),u=a(3),g=a(5),m=(a(16),a(17),a(8)),d=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={messages:[]},a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a.getNameForMessage=function(e){(0,a.props.getName)(e.target.id)},a.getRealDate=function(e){var t=m.DateTime.fromMillis(e),a=null,n=null,s=null;return a=t.c.minute<10?"0"+t.c.minute:t.c.minute,n=t.c.second<10?"0"+t.c.second:t.c.second,s=t.c.month<10?"0"+t.c.month:t.c.month,t.c.hour+":"+a+":"+n+" <"+t.c.day+" : "+s+" : "+t.c.year+" >"},a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=null,a=null;new WebSocket("ws://st-chat.shas.tel").onmessage=function(n){var s=JSON.parse(n.data);t=s.reverse(),a=e.state.messages.concat(t),console.log("eData = ",t),e.setState({messages:a}),console.log("state == ",e.state)}}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e,t=this;return this.state.messages&&(e=this.state.messages.map(function(e,a){var n=t.getRealDate(e.time);return s.a.createElement("li",{key:a},s.a.createElement("div",{id:e.from,className:"message-name",onClick:t.getNameForMessage},e.from),s.a.createElement("span",{className:"message-time"}," ",n," "),s.a.createElement("span",{className:"message-message"},e.message),s.a.createElement("hr",null))})),s.a.createElement("ul",{className:"list-group"},s.a.createElement("li",{className:"list-group-item"},s.a.createElement("h4",{className:"message-header"},"Messages")),e,s.a.createElement("li",null,s.a.createElement("div",{ref:function(e){t.messagesEnd=e}})))}}]),t}(s.a.Component),p=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={AddMessage:null,login:null},a.onChange=function(e){var t=e.target.value;a.setState({AddMessage:t}),console.log("e.value -- ",e.target.value,a.state)},a.sendMessage=function(){if(a.state.AddMessage&&a.state.login){var e={from:a.state.login,message:a.state.AddMessage};a.setState({AddMessage:null}),console.log("but onclik",a.state);var t=new WebSocket("ws://st-chat.shas.tel");t.onopen=function(){t.send(JSON.stringify(e))},document.querySelector(".addMessage-inputMessage").value=""}},a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.login;console.log("add mes login -- ",e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.login;!this.state.login&&t&&this.setState({login:t}),this.state.login&&!t&&this.setState({login:null}),console.log(" addMessage did up date -- ",this.state,t)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("input",{className:"addMessage-inputMessage",type:"text",autoFocus:!0,placeholder:" Enter your meesage",onChange:this.onChange}),s.a.createElement("button",{onClick:this.sendMessage},"SEND"))}}]),t}(s.a.Component),h=(a(18),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(r.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={login:null},a.setLogin=function(e){var t=a.props.setLogin,n=document.querySelector(".login-newLogin").value;n?localStorage.setItem("login",n):!a.state.login&&e&&(n=e),a.setState({login:n}),t(n)},a.removeLogin=function(){localStorage.removeItem("login"),a.setState({login:null}),(0,a.props.setLogin)("")},a.isLogin=function(){var e=a.state.login;return e?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"login-login"},e),s.a.createElement("button",{onClick:a.removeLogin},"Log Out")):s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{className:"login-newLogin",type:"text",placeholder:" Enter Your login",autoFocus:!0}),s.a.createElement("button",{onClick:a.setLogin},"Log In"))},a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("login");!this.state.login&&e&&this.setLogin(e)}},{key:"componentDidUpdate",value:function(){console.log("login did upDate , state --- ",this.state)}},{key:"render",value:function(){var e=this.isLogin();return s.a.createElement("div",{className:"login-wrapper"},e)}}]),t}(s.a.Component)),v=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={login:null},a.setLogin=function(e){console.log("app setLogin -- ",e),a.setState({login:e})},a.getName=function(e){document.querySelector(".addMessage-inputMessage").value=e+" : "},a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("h1",null,"CHAT"),s.a.createElement(h,{setLogin:this.setLogin}),s.a.createElement("div",{className:"messages-wrapper"},s.a.createElement(d,{getName:this.getName})),s.a.createElement("div",{className:"addMessage"},s.a.createElement(p,{login:this.state.login})))}}]),t}(s.a.Component);l.a.render(s.a.createElement(v,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.9ffa7944.chunk.js.map