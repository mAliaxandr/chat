{"version":3,"sources":["Messages/Messages.js","AddMessage/AddMessage.js","LogIn/LogIn.js","App.js","index.js"],"names":["Messages","state","messages","scrollToBottom","_this","messagesEnd","scrollIntoView","behavior","getNameForMessage","e","getName","props","target","id","getRealDate","time","date","DateTime","fromMillis","minute","second","month","c","hour","day","year","_this2","this","newMessage","WebSocket","onmessage","newMessageParse","JSON","parse","data","reverse","concat","console","log","setState","_this3","map","item","index","react_default","a","createElement","key","from","className","onClick","message","ref","el","React","Component","AddMessage","login","onChange","messageForSend","value","sendMessage","mes","ws","onopen","send","stringify","document","querySelector","type","autoFocus","placeholder","LogIn","setLogin","localLogin","localStorage","setItem","removeLogin","removeItem","isLogin","Fragment","getItem","App","name","src_LogIn_LogIn","src_Messages_Messages","src_AddMessage_AddMessage","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.9ffa7944.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Messages.css';\r\nimport { DateTime } from 'luxon';\r\n\r\nclass Messages extends React.Component {\r\n    state={\r\n        messages: [],\r\n    }\r\n\r\n    componentDidMount(){\r\n        let newMessage = null;\r\n        let messages = null;\r\n        const ws = new WebSocket('ws://st-chat.shas.tel');\r\n        ws.onmessage = (e) => {\r\n            const newMessageParse = JSON.parse(e.data);\r\n            newMessage = newMessageParse.reverse();\r\n            messages = this.state.messages.concat(newMessage);\r\n            console.log('eData = ', newMessage);\r\n            this.setState({messages : messages})\r\n            console.log('state == ', this.state);\r\n        }    \r\n    }\r\n\r\n    scrollToBottom = () => {\r\n        this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        this.scrollToBottom();\r\n    }\r\n\r\n    getNameForMessage = (e) => {\r\n        const {getName} = this.props;\r\n        getName(e.target.id)\r\n    }\r\n\r\n    getRealDate = (time) => {\r\n        const date = DateTime.fromMillis(time);\r\n        let minute = null;\r\n        let second = null;\r\n        let month = null;\r\n        if (date.c.minute < 10 ) {\r\n            minute = '0'+date.c.minute;\r\n        } else {\r\n            minute = date.c.minute;\r\n        }\r\n        if ( date.c.second < 10){\r\n            second = '0'+date.c.second;\r\n        }else {\r\n            second = date.c.second;\r\n        } \r\n        if ( date.c.month < 10){\r\n            month = '0'+ date.c.month;\r\n        }else {\r\n            month = date.c.month;\r\n        }\r\n        const userDate = date.c.hour+':'+minute+':'+second+\" <\"+date.c.day+' : '+month+' : '+date.c.year+' >';\r\n        return(\r\n            userDate\r\n        )  \r\n    }\r\n\r\n    render() {\r\n\t\tlet messages;\r\n\t\tif(this.state.messages){\r\n            messages = this.state.messages.map( (item, index) => {\r\n            const date = this.getRealDate(item.time);\r\n\r\n            return(\r\n                <li key={index}>\r\n                    <div\r\n                        id={item.from}\r\n                        className='message-name'\r\n                        onClick={this.getNameForMessage}\r\n                    >\r\n                        {item.from}\r\n                    </div> \r\n                    <span className='message-time'> {date} </span>\r\n                    <span className='message-message'>{item.message}</span>\r\n                    <hr/>\r\n                </li>\r\n            )\r\n                \r\n\r\n            }\r\n            )\r\n\t\t}\r\n\r\n        return (<ul className=\"list-group\">\r\n\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t<h4 className=\"message-header\">Messages</h4>\r\n\t\t\t\t\t</li>\r\n                    {messages}\r\n                    <li>\r\n                        <div ref={(el) => { this.messagesEnd = el; }}></div>\r\n                    </li>\r\n\t\t\t\t</ul>)\r\n\t}\r\n}\r\n\r\nexport default Messages;","import React from 'react';\r\n\r\nclass AddMessage extends React.Component{\r\n    state={\r\n        AddMessage : null,\r\n        login: null,\r\n    }\r\n\r\n    onChange = (e) => {\r\n        let messageForSend = e.target.value;\r\n        this.setState({AddMessage : messageForSend});\r\n        console.log('e.value -- ', e.target.value, this.state);    \r\n    };\r\n\r\n    componentDidMount(){\r\n        const {login} = this.props;\r\n        \r\n        console.log('add mes login -- ', login);\r\n        \r\n    }\r\n\r\n    componentDidUpdate(e){\r\n        \r\n        const {login} = this.props;\r\n        if(!this.state.login && login) {\r\n            this.setState({login});\r\n        }\r\n\r\n        if(this.state.login && !login) {\r\n            this.setState({login:null});\r\n        }\r\n        \r\n        console.log(' addMessage did up date -- ', this.state, login);\r\n    }\r\n\r\n    sendMessage = () => {\r\n        if ( !this.state.AddMessage || !this.state.login) {\r\n            return\r\n        }\r\n        let mes = {\r\n            from: this.state.login,\r\n            message: this.state.AddMessage,\r\n        }\r\n        this.setState({AddMessage : null});\r\n        console.log('but onclik', this.state);\r\n        const ws = new WebSocket('ws://st-chat.shas.tel');\r\n        ws.onopen = () => {\r\n            ws.send(\r\n                JSON.stringify(mes)\r\n            )\r\n        }\r\n        const input = document.querySelector('.addMessage-inputMessage');\r\n        input.value = '';   \r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div>\r\n                <input\r\n                    className=\"addMessage-inputMessage\"\r\n                    type='text'\r\n                    autoFocus\r\n                    placeholder=' Enter your meesage'\r\n                    onChange={this.onChange}\r\n                />\r\n                <button\r\n                    onClick={this.sendMessage}\r\n                >SEND</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AddMessage;","import React from 'react';\r\nimport './LogIn.css';\r\n\r\nclass LogIn extends React.Component {\r\n    state={\r\n        login : null,\r\n    }\r\n\r\n    setLogin = (localLogin) => {\r\n        const {setLogin} = this.props;\r\n        const loginInput = document.querySelector('.login-newLogin');\r\n        let login = loginInput.value;\r\n        if (login) {\r\n            localStorage.setItem('login', login)\r\n        }else\r\n        if (!this.state.login && localLogin) {\r\n            login = localLogin;\r\n        }\r\n        this.setState({login})\r\n        setLogin(login);\r\n    }\r\n\r\n    removeLogin = () => {\r\n        localStorage.removeItem(\"login\")\r\n        this.setState({login : null})\r\n        const {setLogin} = this.props;\r\n        setLogin('');\r\n    }\r\n\r\n    componentDidMount(){\r\n        const localLogin = localStorage.getItem('login');\r\n        if (!this.state.login && localLogin) {\r\n            this.setLogin(localLogin);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        console.log('login did upDate , state --- ', this.state);   \r\n    }\r\n\r\n    isLogin = () => {\r\n        const { login } = this.state;\r\n        if (!login) {\r\n            return (\r\n                <>\r\n                    <input className='login-newLogin' type='text' placeholder=' Enter Your login' autoFocus></input> \r\n                    <button\r\n                        onClick={this.setLogin}\r\n                    >Log In</button>\r\n                </>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <span className='login-login'>{ login }</span>     \r\n                <button\r\n                    onClick={this.removeLogin}\r\n                >Log Out</button>\r\n            </>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        const login = this.isLogin();\r\n\r\n        return(\r\n            <div className='login-wrapper'>\r\n                {login}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LogIn;","import React from 'react';\r\nimport './App.css';\r\nimport Messages from './Messages/Messages';\r\nimport AddMessage from './AddMessage/AddMessage';\r\nimport LogIn from './LogIn/LogIn';\r\n\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    login: null,\r\n  }\r\n\r\n  setLogin = (login) => {\r\n    console.log('app setLogin -- ', login);\r\n    \r\n    this.setState({login : login});\r\n  }\r\n\r\n  getName = (name) => {\r\n    const input = document.querySelector('.addMessage-inputMessage');\r\n    input.value = name+\" : \";\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"App\">\r\n        <h1>CHAT</h1>\r\n        <LogIn\r\n          setLogin={this.setLogin}\r\n        />\r\n        <div className=\"messages-wrapper\">\r\n          <Messages\r\n            getName={this.getName}\r\n          />\r\n        </div>\r\n        <div className=\"addMessage\">\r\n          <AddMessage\r\n            login={this.state.login}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}